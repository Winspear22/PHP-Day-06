{% extends 'base.html.twig' %}
{% block title %}Erreur base de donn√©es{% endblock %}
{% block body %}
    <div class="alert alert-danger mt-5">
        <h2>Erreur technique, ceci est le fichier db_others, c√†d qu'une erreur de bdd autre que la connexion avec la bdd est survenue;</h2>
        <p>{{ error_message }}</p>
        <p class="text-muted">{{ exception_message }}</p>
        <a href="{{ path('e03_index') }}">Retourner √† l'accueil</a>
    </div>
{% endblock %}
{% extends 'base.html.twig' %}
{% block title %}{{ post.title }}{% endblock %}

{% block body %}
<h1>{{ post.title }}</h1>
<p><strong>Auteur :</strong> {{ post.author.username }}</p>
<p><strong>Date :</strong> {{ post.created|date('d/m/Y H:i') }}</p>
<hr>
<p>{{ post.content }}</p>

<a href="{{ path('e03_welcome') }}" class="btn btn-secondary mt-3">Retour √† l‚Äôaccueil</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Cr√©er un compte{% endblock %}

{% block body %}
<h1>Cr√©er un compte</h1>

{{ form_start(registrationForm) }}
    {{ form_row(registrationForm.username) }}
    {{ form_row(registrationForm.plainPassword, {
        label: 'Mot de passe'
    }) }}
    <button type="submit" class="btn btn-primary">Cr√©er le compte</button>
{{ form_end(registrationForm) }}

<a href="{{ path('e03_index') }}" class="btn btn-secondary mt-3">Retour √† l‚Äôaccueil</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Cr√©er un post{% endblock %}

{% block body %}
<h1>Nouveau post</h1>

{{ form_start(form) }}
    {{ form_row(form.title) }}
    {{ form_row(form.content) }}
    <button type="submit" class="btn btn-success">Publier</button>
{{ form_end(form) }}

<a href="{{ path('e03_welcome') }}" class="btn btn-secondary mt-3">Retour</a>
{% endblock %}{% extends 'base.html.twig' %}

{% block title %}Page de bienvenue{% endblock %}

{% block body %}
<h1>Bienvenue {{ app.user.username }} !</h1>

<p>Voici la liste des posts disponibles :</p>

<a href="{{ path('e03_post_new') }}" class="btn btn-primary mb-3">Cr√©er un nouveau post</a>

{% if posts|length > 0 %}
    <ul class="list-unstyled">
        {% for post in posts %}
            <li class="mb-3">
                <a href="{{ path('e03_post_show', { id: post.id }) }}">
                    <strong>{{ post.title }}</strong>
                </a><br>
                <small>
                    par {{ post.author.username }},
                    le {{ post.created|date('d/m/Y H:i') }}
                </small>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>Aucun post pour le moment.</p>
{% endif %}

<a href="{{ path('e03_sign_out') }}" class="btn btn-danger mt-4">Se d√©connecter</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Page d'accueil{% endblock %}

{% block body %}
<h1>Bienvenue sur le site de l‚Äôe03</h1>

{% if not app.user %}
    <a href="{{ path('login') }}" class="btn btn-primary">Se connecter</a>
    <a href="{{ path('e03_sign_up') }}" class="btn btn-secondary">S‚Äôinscrire</a>
{% else %}
    <a href="{{ path('e03_welcome') }}" class="btn btn-success">Aller sur la page Welcome</a>
    <a href="{{ path('e03_sign_out') }}" class="btn btn-danger">Se d√©connecter</a>
{% endif %}
{% endblock %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="...">
        {% block stylesheets %}
            <link rel="stylesheet" href="/style.css"> 
        {% endblock %}
        {% block javascripts %}{% endblock %}
    </head>
    <body>
        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="flash flash-{{ label }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}
        {% block body %}{% endblock %}

    </body>
</html>
{% extends 'base.html.twig' %}
{% block title %}Erreur base de donn√©es{% endblock %}
{% block body %}
    <div class="alert alert-danger mt-5">
        <h2>Erreur technique, ceci est le fichier db_others, c√†d qu'une erreur de bdd autre que la connexion avec la bdd est survenue;</h2>
        <p>{{ error_message }}</p>
        <p class="text-muted">{{ exception_message }}</p>
        <a href="{{ path('e04_index') }}">Retourner √† l'accueil</a>
    </div>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Cr√©er un compte{% endblock %}

{% block body %}
<h1>Cr√©er un compte</h1>

{{ form_start(registrationForm) }}
    {{ form_row(registrationForm.username) }}
    {{ form_row(registrationForm.plainPassword, {
        label: 'Mot de passe'
    }) }}
    <button type="submit" class="btn btn-primary">Cr√©er le compte</button>
{{ form_end(registrationForm) }}

<a href="{{ path('e04_index') }}" class="btn btn-secondary mt-3">Retour √† l‚Äôaccueil</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Page de bienvenue{% endblock %}

{% block body %}
<h1>Bienvenue {{ app.user.username }} !</h1>


<a href="{{ path('e04_sign_out') }}" class="btn btn-danger mt-4">Se d√©connecter</a>
<a href="{{ path('e04_index') }}" class="btn btn-danger mt-4">Retour</a>

{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Page d'accueil{% endblock %}

{% block body %}
    <h1>Bienvenue sur le site de l‚Äôe04</h1>

    {% if not app.user %}
        <p>Vous √™tes actuellement : <strong>{{ name }}</strong></p>

        {% if elapsed is not null %}
            <p>Derni√®re requ√™te il y a : <strong>{{ elapsed }}</strong> secondes.</p>
        {% else %}
            <p>Bienvenue, votre session anonyme vient de commencer.</p>
        {% endif %}

        <a href="{{ path('login') }}" class="btn btn-primary">Se connecter</a>
        <a href="{{ path('e04_sign_up') }}" class="btn btn-secondary">S‚Äôinscrire</a>
    {% else %}
        <p>Bienvenue, vous √™tes connect√© en tant que <strong>{{ app.user.username }}</strong>. Vous n'√™tes plus en session anonyme.</p>

        <a href="{{ path('e04_welcome') }}" class="btn btn-success">Aller sur la page Welcome</a>
        <a href="{{ path('e04_sign_out') }}" class="btn btn-danger">Se d√©connecter</a>
    {% endif %}
{% endblock %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="...">
        {% block stylesheets %}
            <link rel="stylesheet" href="/style.css"> 
        {% endblock %}
        {% block javascripts %}{% endblock %}
    </head>
    <body>
        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="flash flash-{{ label }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}
        {% block body %}{% endblock %}

    </body>
</html>
{% extends 'base.html.twig' %}
{% block title %}Erreur base de donn√©es{% endblock %}
{% block body %}
    <div class="alert alert-danger mt-5">
        <h2>Erreur technique, ceci est le fichier db_others, c√†d qu'une erreur de bdd autre que la connexion avec la bdd est survenue;</h2>
        <p>{{ error_message }}</p>
        <p class="text-muted">{{ exception_message }}</p>
        <a href="{{ path('e01_index') }}">Retourner √† l'accueil</a>
    </div>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Inscription{% endblock %}

{% block body %}
    <h1>Inscription</h1>
    {{ form_start(registrationForm) }}
        {{ form_row(registrationForm.username) }}
        {{ form_row(registrationForm.plainPassword) }}
        {{ form_row(registrationForm.submit) }}
    {{ form_end(registrationForm) }}

    <a href="{{ path('login') }}">D√©j√† inscrit ? Connecte-toi</a>
    <a href="{{ path('e01_index') }}">Retour</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Bienvenue{% endblock %}

{% block body %}
    <div class="alert alert-success mt-4">
        <h2>F√©licitations {{ app.user.userIdentifier }}, vous √™tes connect√© !</h2>
        <a href="{{ path('e01_index') }}">Retourner sur la page de connexion</a>
        <a href="{{ path('e01_sign-out') }}" class="btn btn-danger mt-3">Se d√©connecter</a>
    </div>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block body %}
    <h1>Bienvenue sur l‚Äôapplication !</h1>


    {% for message in app.flashes('success') %}
        <div class="alert alert-success">{{ message }}</div>
    {% endfor %}
    {% for message in app.flashes('error') %}
        <div class="alert alert-danger">{{ message }}</div>
    {% endfor %}

    {% if app.user %}
        <p>Bonjour <strong>{{ app.user.userIdentifier }}</strong> !</p>
        <a href="{{ path('e01_welcome') }}" class="btn btn-success">Aller sur la page Welcome</a>
        <a href="{{ path('e01_sign-out') }}" class="btn btn-danger">Se d√©connecter</a>
    {% else %}
        <a href="{{ path('login') }}" class="btn btn-primary">Se connecter</a>
        <a href="{{ path('e01_sign-up') }}" class="btn btn-secondary">S‚Äôinscrire</a>
    {% endif %}
{% endblock %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="...">
        {% block stylesheets %}
            <link rel="stylesheet" href="/style.css"> 
        {% endblock %}
        {% block javascripts %}{% endblock %}
    </head>
    <body>
        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="flash flash-{{ label }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}
        {% block body %}{% endblock %}

    </body>
</html>
{% extends 'base.html.twig' %}
{% block title %}Erreur base de donn√©es{% endblock %}
{% block body %}
    <div class="alert alert-danger mt-5">
        <h2>Erreur technique, ceci est le fichier db_others, c√†d qu'une erreur de bdd autre que la connexion avec la bdd est survenue;</h2>
        <p>{{ error_message }}</p>
        <p class="text-muted">{{ exception_message }}</p>
        <a href="{{ path('e07_index') }}">Retourner √† l'accueil</a>
    </div>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}{{ post.title }}{% endblock %}

{% block body %}
<h1>{{ post.title }}</h1>

<p><strong>Auteur :</strong> {{ post.author.username }} (R√©putation : {{ post.author.reputation }})</p>
<p><strong>Date :</strong> {{ post.created|date('d/m/Y H:i') }}</p>
{% if post.lastEditedAt and post.lastEditedAt != post.created %}
    <p>
        <strong>Modifi√© le :</strong> {{ post.lastEditedAt|date('d/m/Y H:i') }}
        par {{ post.lastEditedBy.username }}
    </p>
{% endif %}

<hr>

<p>{{ post.content }}</p>

<hr>

<h3>Votes</h3>
<p>
    üëç {{ post.votes|filter(v => v.isLike())|length }}
    /
    üëé {{ post.votes|filter(v => not v.isLike())|length }}
</p>

<ul>
    {% for vote in post.votes %}
        <li>
            {{ vote.user.username }} a vot√© 
            {% if vote.isLike %}
                <span style="color:green;">üëç</span>
            {% else %}
                <span style="color:red;">üëé</span>
            {% endif %}
        </li>
    {% else %}
        <li>Aucun vote pour le moment.</li>
    {% endfor %}
</ul>

<hr>
{% if post.author.id != app.user.id %}
    <a href="{{ path('e07_post_vote', {id: post.id, type: 'like'}) }}" class="btn btn-sm btn-success">üëç</a>
    <a href="{{ path('e07_post_vote', {id: post.id, type: 'dislike'}) }}" class="btn btn-sm btn-danger">üëé</a>
{% else %}
    <span class="badge bg-secondary">Tu ne peux pas voter pour ton post</span>
{% endif %}

{% if app.user %}
    {% set isOwner = post.author.id == app.user.id %}
    {% set isAdmin = 'ROLE_ADMIN' in app.user.roles %}
    {% set hasEnoughReputation = app.user.reputation >= 9 %}
    {% set isAuthorAdmin = 'ROLE_ADMIN' in post.author.roles %}

    {% if (isOwner or hasEnoughReputation or isAdmin) and (not isAuthorAdmin or isAdmin) %}
        <a href="{{ path('e07_post_edit', { id: post.id }) }}" class="btn btn-warning">‚úèÔ∏è Modifier le post</a>
    {% endif %}
{% endif %}



<a href="{{ path('e07_welcome') }}" class="btn btn-secondary mt-3">‚Üê Retour √† l‚Äôaccueil</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Cr√©er un compte{% endblock %}

{% block body %}
<h1>Cr√©er un compte</h1>

{% for label, messages in app.flashes %}
    {% for message in messages %}
        <div class="alert alert-{{ label }} mt-2">{{ message }}</div>
    {% endfor %}
{% endfor %}

{{ form_start(registrationForm) }}
    {{ form_row(registrationForm.username) }}
    {{ form_row(registrationForm.plainPassword, {
        label: 'Mot de passe'
    }) }}
    <button type="submit" class="btn btn-primary">Cr√©er le compte</button>
{{ form_end(registrationForm) }}

<a href="{{ path('e07_index') }}" class="btn btn-secondary mt-3">Retour √† l‚Äôaccueil</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Cr√©er un post{% endblock %}

{% block body %}
<h1>Nouveau post</h1>

{{ form_start(form) }}
    {{ form_errors(form) }}
    {{ form_row(form.title) }}
    {{ form_row(form.content) }}
    <button type="submit" class="btn btn-success">Publier</button>
{{ form_end(form) }}


<a href="{{ path('e07_welcome') }}" class="btn btn-secondary mt-3">Retour</a>
{% endblock %}{% extends 'base.html.twig' %}

{% block title %}Page de bienvenue{% endblock %}

{% block body %}
<h1>Bienvenue {{ app.user.username }} !</h1>

<p>
    R√¥le : 
    {% if 'ROLE_ADMIN' in app.user.roles %}
        <strong style="color: darkred;">Administrateur</strong>
    {% else %}
        Utilisateur normal
    {% endif %}
    ‚Äî R√©putation : {{ app.user.reputation }}
</p>

<a href="{{ path('e07_sign_out') }}" class="btn btn-danger mt-2">Se d√©connecter</a>
<a href="{{ path('e07_index') }}" class="btn btn-secondary mt-2">Retour</a>

{% if is_granted('IS_AUTHENTICATED_FULLY') %}
    <a href="{{ path('e07_post_new') }}" class="btn btn-primary mt-2">Cr√©er un nouveau post</a>
{% endif %}

<hr>

<h2>Liste des posts</h2>

{% for post in posts %}
    <div class="card mt-4">
        <div class="card-body">
            <h3 class="card-title">
                <a href="{{ path('e07_post_show', { id: post.id }) }}">{{ post.title }}</a>
            </h3>
            <p class="card-subtitle mb-2 text-muted">
                Auteur : {{ post.author.username }} ‚Äî le {{ post.created|date('d/m/Y H:i') }}
            </p>

            <p class="card-text">
                Score :
                üëç {{ post.votes|filter(v => v.isLike())|length }} /
                üëé {{ post.votes|filter(v => not v.isLike())|length }}
            </p>

            {% if post.author.id != app.user.id %}
                {% set rep = app.user.reputation %}
                {% if rep >= 3 %}
                    <a href="{{ path('e07_post_vote', { id: post.id, type: 'like' }) }}" class="btn btn-sm btn-success">üëç</a>
                {% endif %}
                {% if rep >= 6 %}
                    <a href="{{ path('e07_post_vote', { id: post.id, type: 'dislike' }) }}" class="btn btn-sm btn-danger">üëé</a>
                {% endif %}
            {% else %}
                <span class="badge bg-secondary">Tu ne peux pas voter pour ton propre post</span>
            {% endif %}
        </div>
    </div>
{% else %}
    <p>Aucun post pour le moment.</p>
{% endfor %}

{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Modifier le post{% endblock %}

{% block body %}
    <h1>Modifier le post</h1>

    {{ form_start(form) }}
        {{ form_row(form.title) }}
        {{ form_row(form.content) }}
        <button class="btn btn-success">‚úÖ Enregistrer</button>
    {{ form_end(form) }}

    <a href="{{ path('e07_post_show', {id: post.id}) }}" class="btn btn-secondary mt-3">‚Üê Retour</a>
{% endblock %}{% extends 'base.html.twig' %}

{% block title %}Page d'accueil{% endblock %}

{% block body %}
    <h1>Bienvenue sur le site de l‚Äôe07</h1>

    {% if not app.user %}
        <a href="{{ path('login') }}" class="btn btn-primary">Se connecter</a>
        <a href="{{ path('e07_sign_up') }}" class="btn btn-secondary">S‚Äôinscrire</a>
    {% else %}
        <a href="{{ path('e07_welcome') }}" class="btn btn-success">Aller sur la page Welcome</a>
        <a href="{{ path('e07_sign_out') }}" class="btn btn-danger">Se d√©connecter</a>
    {% endif %}
{% endblock %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="...">
        {% block stylesheets %}
            <link rel="stylesheet" href="/style.css"> 
        {% endblock %}
        {% block javascripts %}{% endblock %}
    </head>
    <body>
        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="flash flash-{{ label }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}
        {% block body %}{% endblock %}

    </body>
</html>
{% extends 'base.html.twig' %}
{% block title %}Erreur base de donn√©es{% endblock %}
{% block body %}
    <div class="alert alert-danger mt-5">
        <h2>Erreur technique, ceci est le fichier db_others, c√†d qu'une erreur de bdd autre que la connexion avec la bdd est survenue;</h2>
        <p>{{ error_message }}</p>
        <p class="text-muted">{{ exception_message }}</p>
        <a href="{{ path('e06_index') }}">Retourner √† l'accueil</a>
    </div>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}{{ post.title }}{% endblock %}

{% block body %}
    <h1>{{ post.title }}</h1>

    <p><strong>Auteur :</strong> {{ post.author.username }}</p>
    <p><strong>Date :</strong> {{ post.created|date('d/m/Y H:i') }}</p>

    <hr>

    <p>{{ post.content }}</p>

    {% if post.author == app.user %}
        <a href="{{ path('e06_post_edit', {id: post.id}) }}" class="btn btn-warning mt-3">‚úèÔ∏è Modifier</a>
    {% endif %}

    {% if post.lastEditedAt and post.lastEditedBy %}
        <p class="text-muted mt-3">
            Derni√®re modification par {{ post.lastEditedBy.username }} le {{ post.lastEditedAt|date('d/m/Y H:i') }}
        </p>
    {% endif %}

    <a href="{{ path('e06_welcome') }}" class="btn btn-secondary mt-4">‚Üê Retour</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Cr√©er un compte{% endblock %}

{% block body %}
<h1>Cr√©er un compte</h1>

{{ form_start(registrationForm) }}
    {{ form_row(registrationForm.username) }}
    {{ form_row(registrationForm.plainPassword, {
        label: 'Mot de passe'
    }) }}
    <button type="submit" class="btn btn-primary">Cr√©er le compte</button>
{{ form_end(registrationForm) }}

<a href="{{ path('e06_index') }}" class="btn btn-secondary mt-3">Retour √† l‚Äôaccueil</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Cr√©er un post{% endblock %}

{% block body %}
<h1>Nouveau post</h1>

{{ form_start(form) }}
    {{ form_errors(form) }}
    {{ form_row(form.title) }}
    {{ form_row(form.content) }}
    <button type="submit" class="btn btn-success">Publier</button>
{{ form_end(form) }}


<a href="{{ path('e06_welcome') }}" class="btn btn-secondary mt-3">Retour</a>
{% endblock %}{% extends 'base.html.twig' %}

{% block title %}Page de bienvenue{% endblock %}

{% block body %}
<h1>Bienvenue {{ app.user.username }} !</h1>

<a href="{{ path('e06_post_new') }}" class="btn btn-primary mb-3">Cr√©er un nouveau post</a>

{% for post in posts %}
    <div class="post">
        <h3><a href="{{ path('e06_post_show', {id: post.id}) }}">{{ post.title }}</a></h3>
        <p>Auteur : {{ post.author.username }}</p>
        <p>Cr√©√© le : {{ post.created|date('d/m/Y H:i') }}</p>
    </div>
{% else %}
    <p>Aucun post pour le moment.</p>
{% endfor %}


<a href="{{ path('e06_sign_out') }}" class="btn btn-danger mt-4">Se d√©connecter</a>
<a href="{{ path('e06_index') }}" class="btn btn-danger mt-4">Retour</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Modifier le post{% endblock %}

{% block body %}
    <h1>Modifier le post</h1>

    {{ form_start(form) }}
        {{ form_row(form.title) }}
        {{ form_row(form.content) }}
        <button class="btn btn-success">‚úÖ Enregistrer</button>
    {{ form_end(form) }}

    <a href="{{ path('e06_post_show', {id: post.id}) }}" class="btn btn-secondary mt-3">‚Üê Retour</a>
{% endblock %}{% extends 'base.html.twig' %}

{% block title %}Page d'accueil{% endblock %}

{% block body %}
    <h1>Bienvenue sur le site de l‚Äôe06</h1>

    {% if not app.user %}
        <a href="{{ path('login') }}" class="btn btn-primary">Se connecter</a>
        <a href="{{ path('e06_sign_up') }}" class="btn btn-secondary">S‚Äôinscrire</a>
    {% else %}
        <a href="{{ path('e06_welcome') }}" class="btn btn-success">Aller sur la page Welcome</a>
        <a href="{{ path('e06_sign_out') }}" class="btn btn-danger">Se d√©connecter</a>
    {% endif %}
{% endblock %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="...">
        {% block stylesheets %}
            <link rel="stylesheet" href="/style.css"> 
        {% endblock %}
        {% block javascripts %}{% endblock %}
    </head>
    <body>
        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="flash flash-{{ label }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}
        {% block body %}{% endblock %}

    </body>
</html>
{% extends 'base.html.twig' %}
{% block title %}Erreur base de donn√©es{% endblock %}
{% block body %}
    <div class="alert alert-danger mt-5">
        <h2>Erreur technique, ceci est le fichier db_others, c√†d qu'une erreur de bdd autre que la connexion avec la bdd est survenue;</h2>
        <p>{{ error_message }}</p>
        <p class="text-muted">{{ exception_message }}</p>
        <a href="{{ path('e05_index') }}">Retourner √† l'accueil</a>
    </div>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}{{ post.title }}{% endblock %}

{% block body %}
<h1>{{ post.title }}</h1>

<p><strong>Auteur :</strong> {{ post.author.username }} (R√©putation : {{ post.author.reputation }})</p>
<p><strong>Date :</strong> {{ post.created|date('d/m/Y H:i') }}</p>

<hr>

<p>{{ post.content }}</p>

<hr>

<h3>Votes</h3>
<p>
    üëç {{ post.votes|filter(v => v.isLike())|length }}
    /
    üëé {{ post.votes|filter(v => not v.isLike())|length }}
</p>

<ul>
    {% for vote in post.votes %}
        <li>
            {{ vote.user.username }} a vot√© 
            {% if vote.isLike %}
                <span style="color:green;">üëç</span>
            {% else %}
                <span style="color:red;">üëé</span>
            {% endif %}
        </li>
    {% else %}
        <li>Aucun vote pour le moment.</li>
    {% endfor %}
</ul>

<hr>
{% if post.author.id != app.user.id %}
    <a href="{{ path('e05_post_vote', {id: post.id, type: 'like'}) }}" class="btn btn-sm btn-success">üëç</a>
    <a href="{{ path('e05_post_vote', {id: post.id, type: 'dislike'}) }}" class="btn btn-sm btn-danger">üëé</a>
{% else %}
    <span class="badge bg-secondary">Tu ne peux pas voter pour ton post</span>
{% endif %}
<a href="{{ path('e05_welcome') }}" class="btn btn-secondary mt-3">‚Üê Retour √† l‚Äôaccueil</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Cr√©er un compte{% endblock %}

{% block body %}
<h1>Cr√©er un compte</h1>

{{ form_start(registrationForm) }}
    {{ form_row(registrationForm.username) }}
    {{ form_row(registrationForm.plainPassword, {
        label: 'Mot de passe'
    }) }}
    <button type="submit" class="btn btn-primary">Cr√©er le compte</button>
{{ form_end(registrationForm) }}

<a href="{{ path('e05_index') }}" class="btn btn-secondary mt-3">Retour √† l‚Äôaccueil</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Cr√©er un post{% endblock %}

{% block body %}
<h1>Nouveau post</h1>

{{ form_start(form) }}
    {{ form_errors(form) }}
    {{ form_row(form.title) }}
    {{ form_row(form.content) }}
    <button type="submit" class="btn btn-success">Publier</button>
{{ form_end(form) }}


<a href="{{ path('e05_welcome') }}" class="btn btn-secondary mt-3">Retour</a>
{% endblock %}{% extends 'base.html.twig' %}

{% block title %}Page de bienvenue{% endblock %}

{% block body %}
<h1>Bienvenue {{ app.user.username }} !</h1>
<a href="{{ path('e05_post_new') }}" class="btn btn-primary mb-3">Cr√©er un nouveau post</a>

{% for post in posts %}
    <div class="post">
        <h3>
            <a href="{{ path('e05_post_show', {id: post.id}) }}">{{ post.title }}</a>
        </h3>
        <p>Auteur : {{ post.author.username }} (R√©putation : {{ post.author.reputation }})</p>
        <p>Cr√©√© le : {{ post.created|date('d/m/Y H:i') }}</p>
        <p>üëç {{ post.votes|filter(v => v.isLike())|length }} / {{ post.votes|filter(v => not v.isLike())|length }}</p>
        {% if post.author.id != app.user.id %}
    <a href="{{ path('e05_post_vote', {id: post.id, type: 'like'}) }}" class="btn btn-sm btn-success">üëç</a>
    <a href="{{ path('e05_post_vote', {id: post.id, type: 'dislike'}) }}" class="btn btn-sm btn-danger">üëé</a>
{% else %}
    <span class="badge bg-secondary">Tu ne peux pas voter pour ton post</span>
{% endif %}
    </div>
{% else %}
    <p>Aucun post pour le moment.</p>
{% endfor %}

<a href="{{ path('e05_sign_out') }}" class="btn btn-danger mt-4">Se d√©connecter</a>
<a href="{{ path('e05_index') }}" class="btn btn-danger mt-4">Retour</a>

{% endblock %}{% extends 'base.html.twig' %}

{% block title %}Page d'accueil{% endblock %}

{% block body %}
    <h1>Bienvenue sur le site de l‚Äôe05</h1>

    {% if not app.user %}
        <a href="{{ path('login') }}" class="btn btn-primary">Se connecter</a>
        <a href="{{ path('e05_sign_up') }}" class="btn btn-secondary">S‚Äôinscrire</a>
    {% else %}
        <a href="{{ path('e05_welcome') }}" class="btn btn-success">Aller sur la page Welcome</a>
        <a href="{{ path('e05_sign_out') }}" class="btn btn-danger">Se d√©connecter</a>
    {% endif %}
{% endblock %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="...">
        {% block stylesheets %}
            <link rel="stylesheet" href="/style.css"> 
        {% endblock %}
        {% block javascripts %}{% endblock %}
    </head>
    <body>
        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="flash flash-{{ label }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}
        {% block body %}{% endblock %}

    </body>
</html>
{% extends 'base.html.twig' %}

{% block title %}Panneau d'administration{% endblock %}

{% block body %}
<h1>Panneau d‚Äôadministration</h1>

{# Message flash pour succ√®s ou erreur #}
{% for label, messages in app.flashes %}
    {% for message in messages %}
        <div class="alert alert-{{ label == 'success' ? 'success' : 'danger' }}">
            {{ message }}
        </div>
    {% endfor %}
{% endfor %}

{# Bouton de cr√©ation des utilisateurs #}
<form action="{{ path('e02_create_user') }}" method="post">
    <button type="submit" class="btn btn-success mb-4">
        Cr√©er 10 utilisateurs ROLE_USER
    </button>
</form>

{# Liste des utilisateurs #}
<h2>Utilisateurs existants</h2>
{% if users is empty %}
    <p><em>Aucun utilisateur dans la base.</em></p>
{% else %}
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nom d'utilisateur</th>
                <th>R√¥les</th>
            </tr>
        </thead>
        <tbody>
			{% for user in users %}
				<tr>
					<td>{{ user.id }}</td>
					<td>{{ user.username }}</td>
					<td>{{ user.getRoles()|join(', ') }}</td>
					<td>
						{% if user != app.user and 'ROLE_ADMIN' not in user.getRoles() %}
							<form method="post" action="{{ path('e02_admin_delete', {id: user.id}) }}" onsubmit="return confirm('Supprimer {{ user.username }} ?');">
								<input type="hidden" name="_token" value="{{ csrf_token('delete_user_' ~ user.id) }}">
								<button type="submit" class="btn btn-sm btn-danger">Supprimer</button>
							</form>
						{% else %}
							<em>Non autoris√©</em>
						{% endif %}
					</td>
				</tr>
			{% endfor %}
        </tbody>
    </table>
{% endif %}

<a href="{{ path('e02_index') }}" class="btn btn-secondary mt-4">Retour √† l'accueil</a>
<a href="{{ path('e02_sign_out') }}" class="btn btn-danger mt-4">Se d√©connecter</a>
{% endblock %}{% extends 'base.html.twig' %}
{% block title %}Erreur base de donn√©es{% endblock %}
{% block body %}
    <div class="alert alert-danger mt-5">
        <h2>Erreur technique, ceci est le fichier db_others, c√†d qu'une erreur de bdd autre que la connexion avec la bdd est survenue;</h2>
        <p>{{ error_message }}</p>
        <p class="text-muted">{{ exception_message }}</p>
        <a href="{{ path('e02_index') }}">Retourner √† l'accueil</a>
    </div>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Cr√©er un compte admin{% endblock %}

{% block body %}
<h1>Cr√©er un compte administrateur</h1>

{{ form_start(registrationForm) }}
    {{ form_row(registrationForm.username) }}
    {{ form_row(registrationForm.plainPassword, {
        label: 'Mot de passe'
    }) }}
    <button type="submit" class="btn btn-primary">Cr√©er le compte admin</button>
{{ form_end(registrationForm) }}

<a href="{{ path('e02_index') }}" class="btn btn-secondary mt-3">Retour √† l‚Äôaccueil</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Page de bienvenue{% endblock %}

{% block body %}
<h1>Bienvenue, {{ user.username }} !</h1>

{% if 'ROLE_ADMIN' in user.getRoles() %}
    <p>Vous √™tes administrateur.</p>
    <a href="{{ path('e02_admin') }}" class="btn btn-primary">Acc√©der √† la page d‚Äôadministration</a>
{% else %}
    <p>Malheureusement, vous n‚Äô√™tes pas admin. Vous ne pouvez pas acc√©der √† la page d‚Äôadministration.</p>
{% endif %}

<a href="{{ path('e02_sign_out') }}" class="btn btn-danger mt-3">Se d√©connecter</a>
{% endblock %}
{% extends 'base.html.twig' %}

{% block title %}Page d'accueil{% endblock %}

{% block body %}
<h1>Bienvenue sur le site de l‚Äôe02</h1>

{% if not user %}
    <a href="{{ path('login') }}" class="btn btn-primary">Se connecter</a>
    <a href="{{ path('e02_sign_up') }}" class="btn btn-secondary">S‚Äôinscrire</a>
{% else %}
    <a href="{{ path('e02_welcome') }}" class="btn btn-success">Aller sur la page Welcome</a>
    <a href="{{ path('e02_sign_out') }}" class="btn btn-danger">Se d√©connecter</a>
{% endif %}
{% endblock %}<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="...">
        {% block stylesheets %}
            <link rel="stylesheet" href="/style.css"> 
        {% endblock %}
        {% block javascripts %}{% endblock %}
    </head>
    <body>
        {% for label, messages in app.flashes %}
            {% for message in messages %}
                <div class="flash flash-{{ label }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endfor %}
        {% block body %}{% endblock %}

    </body>
</html>
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>‚ö´Ô∏è</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
        {% block stylesheets %}
        {% endblock %}

        {% block javascripts %}
        {% endblock %}
    </head>
    <body>
        {% block body %}{% endblock %}
    </body>
</html>
{% extends 'base.html.twig' %}
{% block title %}Connexion{% endblock %}
{% block body %}
<h1>Connexion</h1>
<form method="post">
    <input type="text" name="username" placeholder="Nom d'utilisateur" required>
    <input type="password" name="password" placeholder="Mot de passe" required>
    <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
    <button type="submit">Se connecter</button>
</form>
{% endblock %}{% extends 'base.html.twig' %}
{% block title %}Authentification requise{% endblock %}
{% block body %}
<p>Vous devez √™tre connect√© pour acc√©der √† cette page.</p>
<a href="{{ path('login') }}">Se connecter</a>
{% endblock %}